{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Mock from 'mockjs';\nimport Cookie from 'js-cookie';\nimport { getMenu } from '@/api';\nexport default {\n  data() {\n    return {\n      form: {\n        username: '',\n        password: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          trigger: 'blur',\n          message: '请输入账号'\n        }],\n        password: [{\n          required: true,\n          trigger: 'blur',\n          message: '请输入密码'\n        }]\n      }\n    };\n  },\n  methods: {\n    //登录\n    submit() {\n      // //mock模拟token数据\n      // const token = Mock.Random.guid()\n      // //token存入cookie用于不同页面间通信\n      // Cookie.set('token',token)\n      // //登录过户后跳转到首页\n      // this.$router.push('/home')\n\n      //校验数据\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          getMenu(this.form).then(data => {\n            console.log(data);\n            if (data.data.code === 200) {\n              Cookie.set('token', data.data.token);\n              this.$router.push('/home');\n              this.$st;\n            } else {\n              this.$message.error(data.data.message);\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["Mock","Cookie","getMenu","data","form","username","password","rules","required","trigger","message","methods","submit","$refs","validate","valid","then","console","log","code","set","token","$router","push","$st","$message","error"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-card class=\"login-container\">\r\n            <el-form  :rules=\"rules\" ref=\"form\" :model=\"form\" :inline=\"true\" >\r\n                <h3 class=\"login_title\">系统登录</h3>\r\n                <el-form-item label=\"账号\" prop=\"username\" >\r\n                    <el-input v-model=\"form.username\" placeholder=\"请输入账号\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\"  >\r\n                    <el-input v-model=\"form.password\" type=\"password\" placeholder=\"请输入密码\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button @click=\"submit\" style=\"margin-left: 100px;margin-top: 10px;\" type=\"primary\">登录</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<style lang=\"less\">\r\n    .login-container{\r\n        \r\n       \r\n        width: 307px;\r\n        margin: 100px auto;\r\n        h3{\r\n            text-align: center;\r\n            margin-bottom: 40px;\r\n        }\r\n        \r\n        \r\n    }\r\n</style>\r\n<script>\r\nimport  Mock  from 'mockjs';\r\nimport Cookie from 'js-cookie'\r\nimport { getMenu } from '@/api';\r\n\r\nexport default{\r\n    data() {\r\n        return {\r\n            form:{\r\n                username:'',\r\n                password:''\r\n            },\r\n            rules:{\r\n                username:[{required:true,trigger:'blur',message:'请输入账号'}],\r\n                password:[{required:true,trigger:'blur',message:'请输入密码'}]\r\n            }\r\n        }\r\n    },\r\n    methods:{\r\n        //登录\r\n        submit(){\r\n            // //mock模拟token数据\r\n            // const token = Mock.Random.guid()\r\n            // //token存入cookie用于不同页面间通信\r\n            // Cookie.set('token',token)\r\n            // //登录过户后跳转到首页\r\n            // this.$router.push('/home')\r\n\r\n            //校验数据\r\n            this.$refs.form.validate((valid)=>{\r\n                if(valid){\r\n                    getMenu(this.form).then((data)=>{\r\n                        console.log(data);\r\n                        if (data.data.code===200) {\r\n                            Cookie.set('token',data.data.token)\r\n                            this.$router.push('/home')\r\n                            this.$st\r\n                        }\r\n                        else{\r\n                            this.$message.error(data.data.message)\r\n                        }\r\n                    })\r\n                }\r\n                \r\n            })\r\n\r\n\r\n\r\n\r\n            \r\n\r\n        }\r\n    }\r\n}\r\n</script>"],"mappings":";AAkCA,OAAAA,IAAA;AACA,OAAAC,MAAA;AACA,SAAAC,OAAA;AAEA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,QAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACA;IACAC,OAAA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA,KAAAC,KAAA,CAAAT,IAAA,CAAAU,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAb,OAAA,MAAAE,IAAA,EAAAY,IAAA,CAAAb,IAAA;YACAc,OAAA,CAAAC,GAAA,CAAAf,IAAA;YACA,IAAAA,IAAA,CAAAA,IAAA,CAAAgB,IAAA;cACAlB,MAAA,CAAAmB,GAAA,UAAAjB,IAAA,CAAAA,IAAA,CAAAkB,KAAA;cACA,KAAAC,OAAA,CAAAC,IAAA;cACA,KAAAC,GAAA;YACA,OACA;cACA,KAAAC,QAAA,CAAAC,KAAA,CAAAvB,IAAA,CAAAA,IAAA,CAAAO,OAAA;YACA;UACA;QACA;MAEA;IAOA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}